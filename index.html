<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Karte – Geometrien</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <style>html,body,#map{height:100%;margin:0}</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/topojson-client@3"></script>
<script>
const URL_TOPO = 'data/geo.topo.min.json';   // deine Originaldatei

(async()=>{
  const r = await fetch(URL_TOPO,{cache:'no-store'});
  if(!r.ok){console.error('TopoJSON HTTP',r.status);return;}
  const topo = await r.json();

  // erstes Objekt mit Geometrien auswählen
  const key = Object.keys(topo.objects||{})[0];
  const geo = topojson.feature(topo, topo.objects[key]);
  console.log('features:', geo.features?.length||0);

  const map = L.map('map',{minZoom:5,maxZoom:12}).setView([51.2,10.4],6);
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'© OSM'
  }).addTo(map);

  const layer = L.geoJSON(geo,{
    style:{color:'#333',weight:.4,fillOpacity:.6,fillColor:'#cfe9ff'}
  }).addTo(map);

  map.fitBounds(layer.getBounds(),{padding:[20,20]});
})();
</script>
</body>
</html>
